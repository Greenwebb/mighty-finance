<div class="content-body">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="">
                    <div  style="background-color:#662d91;" class="card-header">
                        <h4 class="card-title" style=" color:#f0f0f0">
                            <svg fill="#ffff" height="35" width="35" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.853 512.853" xml:space="preserve" stroke="#af83c3" stroke-width="7.692794999999999">

                                <g id="SVGRepo_bgCarrier" stroke-width="0"/>
                                
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
                                
                                <g id="SVGRepo_iconCarrier"> <g transform="translate(1 1)"> <g> <g> <path d="M142.967,366.113c-0.689-1.239-1.681-2.231-2.92-2.92l-24.14-24.14c-3.413-3.413-8.533-3.413-11.947,0l-24.14,24.14 c-1.239,0.689-2.232,1.681-2.92,2.92l-24.14,24.14c-3.413,3.413-3.413,8.533,0,11.947c3.413,3.413,8.533,3.413,11.947,0 L75.8,391.107v39.253c0,5.12,3.413,8.533,8.533,8.533c5.12,0,8.533-3.413,8.533-8.533v-56.32l17.067-17.067L127,374.04v56.32 c0,5.12,3.413,8.533,8.533,8.533s8.533-3.413,8.533-8.533v-39.253L155.16,402.2c1.707,1.707,3.413,2.56,5.973,2.56 s4.267-0.853,5.973-2.56c3.413-3.413,3.413-8.533,0-11.947L142.967,366.113z"/> <path d="M459.8,310.893h-128c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h128c5.12,0,8.533-3.413,8.533-8.533 S464.92,310.893,459.8,310.893z"/> <path d="M383,370.627c0-5.12-3.413-8.533-8.533-8.533h-128c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h128 C379.587,379.16,383,375.747,383,370.627z"/> <path d="M442.733,455.96h-93.867c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h93.867 c5.12,0,8.533-3.413,8.533-8.533S447.853,455.96,442.733,455.96z"/> <path d="M353.133,422.68c-4.267,2.56-5.12,7.68-2.56,11.947s7.68,5.12,11.947,2.56l19.627-13.653 c11.093,9.387,23.893,9.387,32.427,7.68l13.653,13.653c1.707,1.707,3.413,2.56,5.973,2.56s4.267-0.853,5.973-2.56 c3.413-3.413,3.413-8.533,0-11.947l-17.067-17.067c-2.56-2.56-5.973-3.413-9.387-1.707c-0.853,0.853-12.8,5.12-23.893-6.827 c-2.56-3.413-7.68-4.267-11.093-1.707L353.133,422.68z"/> <path d="M246.467,327.96h51.2c5.12,0,8.533-3.413,8.533-8.533s-3.413-8.533-8.533-8.533h-51.2c-5.12,0-8.533,3.413-8.533,8.533 S241.347,327.96,246.467,327.96z"/> <path d="M459.8,362.093h-51.2c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h51.2c5.12,0,8.533-3.413,8.533-8.533 S464.92,362.093,459.8,362.093z"/> <path d="M212.333,302.36c-5.12,0-8.533,3.413-8.533,8.533v153.6c0,5.12,3.413,8.533,8.533,8.533c5.12,0,8.533-3.413,8.533-8.533 v-153.6C220.867,305.773,217.453,302.36,212.333,302.36z"/> <path d="M486.253,268.227h-260.34c0.878-0.854,1.767-1.693,2.634-2.56l147.961-147.961c0.803-0.527,1.576-1.251,2.226-2.226 l10.824-10.824c4.986,9.299,3.373,21.373-4.851,29.598L288.28,230.68c-3.413,3.413-3.413,8.533,0,11.947 c1.707,1.707,3.413,2.56,5.973,2.56c1.707,0,4.267-0.853,5.973-2.56l96.427-95.573c14.363-15.119,15.991-37.6,4.907-54.4 l13.013-13.013l17.92-17.92c6.827-5.973,10.24-14.507,10.24-23.893s-3.413-17.92-10.24-23.893 c-5.973-6.827-14.507-10.24-23.893-10.24s-17.92,3.413-23.893,10.24L180.76,217.88c-14.832,14.832-27.883,31.941-38.78,50.347 H24.6c-14.507,0-25.6,11.093-25.6,25.6V481.56c0,14.507,11.093,25.6,25.6,25.6h460.8c14.507,0,25.6-11.093,26.453-25.6V293.827 C511.853,279.32,500.76,268.227,486.253,268.227z M372.76,49.773l23.893,23.893L372.76,97.56l-23.893-23.893L372.76,49.773z M395.8,25.88c3.413-3.413,7.68-5.12,12.8-5.12s9.387,1.707,11.947,5.12c3.413,3.413,5.12,7.68,5.12,11.947 s-1.707,9.387-5.12,11.947l-12.373,12.373l-24.295-24.295L395.8,25.88z M192.707,229.827L336.192,85.739l24.195,24.195 L216.6,253.72c-21.068,21.911-46.302,38.819-74.049,50.743c3.382-8.349,7.566-15.895,11.756-23.436 c0.734-1.1,1.132-2.359,1.235-3.639C165.938,259.993,178.565,243.968,192.707,229.827z M493.933,481.56 c0,5.12-3.413,8.533-8.533,8.533H24.6c-5.12,0-8.533-3.413-8.533-8.533V293.827c0-5.12,3.413-8.533,8.533-8.533v0.853h107.663 c-4.957,10.014-9.306,20.293-12.943,30.72c-0.683,1.025-0.95,2.187-0.867,3.376c-0.16,2.033,0.792,4.229,2.574,6.011 c1.707,1.707,5.12,2.56,8.533,1.707c28.16-9.387,54.613-23.893,77.653-42.667H485.4c5.12,0,8.533,3.413,8.533,8.533V481.56z"/> </g> </g> </g> </g>
                                
                                </svg>
                            View All Loans
                        </h4>
                        
                        {{-- <div>
                            <button title="Export to Excel" wire:click="exportLoans()" class="btn btn-square btn-success">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-spreadsheet" viewBox="0 0 16 16">
                                    <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V9H3V2a1 1 0 0 1 1-1h5.5v2zM3 12v-2h2v2H3zm0 1h2v2H4a1 1 0 0 1-1-1v-1zm3 2v-2h3v2H6zm4 0v-2h3v1a1 1 0 0 1-1 1h-2zm3-3h-3v-2h3v2zm-7 0v-2h3v2H6z"/>
                                </svg>
                            </button>
                            <button onclick="printLoansTable()" title="Export all to PDF" class="btn btn-square btn-warning">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-filetype-pdf" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5L14 4.5ZM1.6 11.85H0v3.999h.791v-1.342h.803c.287 0 .531-.057.732-.173.203-.117.358-.275.463-.474a1.42 1.42 0 0 0 .161-.677c0-.25-.053-.476-.158-.677a1.176 1.176 0 0 0-.46-.477c-.2-.12-.443-.179-.732-.179Zm.545 1.333a.795.795 0 0 1-.085.38.574.574 0 0 1-.238.241.794.794 0 0 1-.375.082H.788V12.48h.66c.218 0 .389.06.512.181.123.122.185.296.185.522Zm1.217-1.333v3.999h1.46c.401 0 .734-.08.998-.237a1.45 1.45 0 0 0 .595-.689c.13-.3.196-.662.196-1.084 0-.42-.065-.778-.196-1.075a1.426 1.426 0 0 0-.589-.68c-.264-.156-.599-.234-1.005-.234H3.362Zm.791.645h.563c.248 0 .45.05.609.152a.89.89 0 0 1 .354.454c.079.201.118.452.118.753a2.3 2.3 0 0 1-.068.592 1.14 1.14 0 0 1-.196.422.8.8 0 0 1-.334.252 1.298 1.298 0 0 1-.483.082h-.563v-2.707Zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638H7.896Z"/>
                                </svg>
                            </button>  
                            @hasanyrole('admin')
                            <a target="_blank" href="{{ route('proxy-loan-create')}}" class="btn btn-square btn-primary">
                                <span class="mx-2">Create New Loan</span>
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-up-right" viewBox="0 0 16 16">
                                        <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z"/>
                                        <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z"/>
                                    </svg>
                                </span>
                            </a>
                            @endhasanyrole
                        </div> --}}
                    </div>
                    <div class="card-body pb-0" style="padding-bottom: 30%">
                        @if (Session::has('attention'))
                        <div wire:ignore.self class="intro-x alert alert-secondary w-1/2 alert-dismissible justify-center show flex items-center mb-2" role="alert"> 
                            <i data-lucide="alert-octagon" class="w-6 h-6 mr-2"></i> 
                            {{ Session::get('attention') }}
                            <button type="button" class="btn-close" data-tw-dismiss="alert" aria-label="Close"> 
                                <i data-lucide="x" class="w-4 h-4"></i> 
                            </button> 
                        </div>
                        @elseif (Session::has('error_msg'))
                        <div wire:ignore.self class="intro-x alert alert-danger w-1/2 alert-dismissible justify-center show flex items-center mb-2" role="alert"> 
                            <i data-lucide="alert-octagon" class="w-6 h-6 mr-2"></i> 
                            {{ Session::get('error_msg') }}
                            <button type="button" class="btn-close" data-tw-dismiss="alert" aria-label="Close"> 
                                <i data-lucide="x" class="w-4 h-4"></i> 
                            </button> 
                        </div>
                        @endif
                        <div wire:ignore.self  class="table-responsive patient">
                            <div class="row py-2">
                                {{-- Admin Only --}}
                                @can('accept and reject loan requests')
                                <div wire:ignore class="col-xl-3 center">
                                    <select multiple wire:model.lazy="status" class="default-select form-control wide mt-3" aria-placeholder="Settlement Type" placeholder="Status">
                                        <option value="">Any</option>
                                        <option value="0">Pending</option>
                                        <option value="1">Accepted</option>
                                        <option value="2">Under Review</option>
                                        <option value="3">Rejected</option>
                                    </select>
                                </div>
                                <div wire:ignore class="col-xl-3 center">
                                    <select multiple wire:model.lazy="type" class="default-select form-control wide mt-3" aria-placeholder="Loan" placeholder="Loan Types">
                                        <option value="Personal">Personal Loan</option>
                                        <option value="Education">Education Loan</option>
                                        <option value="Asset Financing">Asset Financing Loan</option>
                                        <option value="Home Improvement">Home Improvements Loan</option>
                                        <option value="Agri Business">Agri Business Loan</option>
                                        <option value="Women in Business (Femiprise) Soft">Women in Business Loan</option>
                                    </select>
                                </div>
                                @endcan
                                <div class="col-xl-6 center">
                                    {{-- <button wire:click="changeView('grid')" class="mt-3 btn {{ $view === 'grid' ? 'btn-primary':'btn-light' }} btn-square" title="View Grid">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grid-3x3-gap" viewBox="0 0 16 16">
                                            <path d="M4 2v2H2V2h2zm1 12v-2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1zm0-5V7a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1zm0-5V2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1zm5 10v-2a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1zm0-5V7a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1zm0-5V2a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1zM9 2v2H7V2h2zm5 0v2h-2V2h2zM4 7v2H2V7h2zm5 0v2H7V7h2zm5 0h-2v2h2V7zM4 12v2H2v-2h2zm5 0v2H7v-2h2zm5 0v2h-2v-2h2zM12 1a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zm-1 6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7zm1 4a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2z"/>
                                        </svg>
                                    </button> --}}
                                    {{-- <button wire:click="changeView('table')" class="mt-3 btn {{ $view === 'table' ? 'btn-primary':'btn-light' }} btn-square" title="View Grid">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-table" viewBox="0 0 16 16">
                                            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/>
                                        </svg>
                                    </button>
                                    <button wire:click="changeView('assesment')" class="mt-3 btn {{ $view === 'assesment' ? 'btn-primary':'btn-light' }} btn-square" title="View Assesement">
                                        Assesment
                                        <span class="btn-icon-end">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-spreadsheet-fill" viewBox="0 0 16 16">
                                                <path d="M6 12v-2h3v2H6z"/>
                                                <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zM3 9h10v1h-3v2h3v1h-3v2H9v-2H6v2H5v-2H3v-1h2v-2H3V9z"/>
                                            </svg>
                                        </span>
                                    </button> --}}
                                </div>
                                {{-- End Amin Only --}}
                            </div>
                            @include('livewire.dashboard.__parts.dash-alerts')
                            
                            <div id="loans_table_print_view">
                                @if($view === 'list')
                                    @include('livewire.dashboard.loans.__parts.list-loan-request')
                                @endif
                                @if($view === 'table')
                                    @include('livewire.dashboard.loans.__parts.default-loan-request-table')
                                @endif
                                
                                @if($view === 'grid')
                                    @include('livewire.dashboard.loans.__parts.grid-loan-requests')
                                @endif
                                
                                @if($view === 'assesment')
                                    @include('livewire.dashboard.loans.__parts.assesment-loan-request-table')
                                @endif
                            </div>
                            <div class="flex items-center justify-center text-xs my-4 mx-4">
                                {{ $requests->links() }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div wire:ignore.self class="modal fade" id="updateDueDate" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-header bg-primary text-white">
                <h3 style="color:#fff">{{ $loan_request->type }} Loan</h3>
                <h5 style="color:#fff">{{ $loan_request->fname.' '.$loan_request->lname }}</h5>
            </div>
            <div class="modal-content p-4">
                @if ($loan_request !== null)
                <div class="row mb-3">
                    <div class="col-xl-12">
                        <h5>Amount: {{ $loan_request->amount }}</h5>
                        <h5>Duration: {{ $loan_request->repayment_plan }} Months</h5>
                        <h6>Date of Application:
                            @if ($loan_request->doa !== null)
                                @php 
                                    $date_str = $loan_request->doa;
                                    $date = DateTime::createFromFormat('Y-m-d H:i:s', $date_str);
                                    echo $date->format('F j, Y, g:i a');
                                @endphp
                            @else
                            {{ $loan_request->created_at->toFormattedDateString() }}
                            @endif
                            
                        </h6>
                    </div>
                    
                </div>
                @endif
                <div class="col-xl-12">
                    <div class="mb-3">
                        <div>
                            <h5 class="text-label form-label text-warning">Change Due Date (Optional)</h5>
                            <input type="date" placeholder="Due Date" name="datepicker" wire:model.defer="due_date" class=" form-control" id="">
                        </div>
                        <br>
                        <button  data-bs-dismiss="modal" wire:click="clear()" class="btn btn-light btn-square">Cancel</button>
                        @if($loan_request !== null)
                            <button wire:click="accept({{ $loan_request->id }})" data-bs-dismiss="modal" class="btn btn-primary btn-square">Approve Loan</button>
                        @endif
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div wire:ignore class="modal fade" id="createNewLoanMain" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content p-4">
    
                <div id="smartwizard" class="form-wizard order-create">
                    <ul class="nav nav-wizard">
                        <li>
                            <a class="nav-link" href="#wizard_Service"> 
                                <span>1</span> 
                            </a>
                        </li>
                        <li>
                            <a class="nav-link" href="#wizard_Time">
                                <span>2</span>
                            </a>
                        </li>
                        {{-- <li><a class="nav-link" href="#wizard_Details">
                            <span>3</span>
                        </a></li> --}}
                        <li>
                            <a class="nav-link" href="#wizard_Payment">
                                <span>3</span>
                            </a>
                        </li>
                    </ul>
                    <form id="kyc_form" class="tab-content" action="{{ route("proxy-apply-loan") }}" method="POST" style="min-height:60vh" enctype="multipart/form-data">
                        @csrf
                        <div id="wizard_Service" class="tab-pane" role="tabpanel">
                            <div class="row">
                                
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Borrower*</label>
                                        <select type="text" name="borrower_id" class="form-control">
                                            @forelse ($users as $user)
                                                @if(empty($user->loans->toArray()))
                                                    <option wire:model="new_loan_user" value="{{ $user->id }}">{{ $user->fname.' '.$user->lname}}</option>
                                                @endif
                                            @empty
                                            <option>No Borrowers Available. <a target="_blank" href="{{ route('borrowers') }}">Add Borrowers</a></option>
                                            @endforelse
                                        </select>                                
                                    </div>
                                </div>
                                <input type="hidden" name="proxyloan" value="proxyloan">
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Purpose for Loan*</label>
                                        <select type="text" name="type" class="form-control">
                                            <option value="Personal">Personal</option>
                                            <option value="Education">Education</option>
                                            <option value="Asset Financing">Asset Financing</option>
                                            <option value="Home Improvement">Home Improvements</option>
                                            <option value="Agri Business">Agri Business</option>
                                            <option value="Women in Business (Femiprise) Soft">Women in Business (Femiprise) Soft Loan</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Amount (ZMW)</label>
                                        <input type="text" id="principalLoan2" name="amount" class="form-control" placeholder="0.00" required>
                                        <small id="validprincipal2" style="color:red">Amount is required!</small>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Duration*</label>
                                        <select type="text" name="repayment_plan" class="form-control">
                                            <option value="1">1 Month</option>
                                            <option value="2">2 Month</option>
                                            <option value="3">3 Months</option>
                                            <option value="4">4 Months</option>
                                            <option value="5">5 Months</option>
                                            <option value="6">6 Months</option>
                                            <option value="7">7 Months</option>
                                            <option value="8">8 Months</option>
                                            <option value="9">9 Months</option>
                                            <option value="10">10 Months</option>
                                            <option value="11">11 Months</option>
                                            <option value="12">12 Months</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Borrower KYC*</label>
                                        <select type="text" name="bypass" class="form-control">
                                            <option value="true">Skip KYC Update</option>
                                            <option value="false">Borrower will update KYC</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-3">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Date of Application*</label>
                                        <input name="datepicker" type="date" name="created_at" class="form-control" id="datepicker">
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-3">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Basic Pay*</label>
                                        <input id="basic_pay_field" value="{{ $user_basic_pay }}" name="basic_pay" class=" form-control" >
                                        <small id="validbasicpayl2" style="color:red">Basic Pay is required!</small>

                                    </div>
                                </div>
                                <div class="col-lg-6 mb-3">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Net Pay*</label>
                                        <input id="net_pay_field" value="{{ $user_net_pay }}" name="net_pay" class="form-control">
                                        <small id="validnetpayl2" style="color:red">Net Pay is required!</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="wizard_Time" class="tab-pane" role="tabpanel">
                            <div class="row">
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 1's First Name*</label>
                                        <input type="text" name="gfname" class="form-control" placeholder="Name" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 1's Last Name*</label>
                                        <input type="text" name="glname" class="form-control" placeholder="Name" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 1's Email Address*</label>
                                        <input type="email" name="gemail" class="form-control" id="emial1" placeholder="example@example.com.com" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 1's Phone Number*</label>
                                        <input type="text" name="gphone" class="form-control" placeholder="(+1)408-657-9007" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Relation*</label>
                                        <select type="text" name="g_relation" class="form-control">
                                            <option value="Work Mate">Work Mate</option>
                                            <option value="Relative">Relative</option>
                                            <option value="Close Friend">Close Friend</option>
                                        </select> 
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Gender*</label>
                                        <select type="text" name="g_gender" class="form-control">
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select> 
                                    </div>
                                </div>
                            </div>
    
                            <div class="row">
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 2's First Name*</label>
                                        <input type="text" name="g2fname" class="form-control" placeholder="Name" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 2's Last Name*</label>
                                        <input type="text" name="g2lname" class="form-control" placeholder="Name" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 2's Email Address*</label>
                                        <input type="email" name="g2email" class="form-control" id="emial1" placeholder="example@example.com.com" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Guarantor 2's Phone Number*</label>
                                        <input type="text" name="g2phone" class="form-control" placeholder="(+1)408-657-9007" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Relation*</label>
                                        <select type="text" name="g2_relation" class="form-control">
                                            <option value="Work Mate">Work Mate</option>
                                            <option value="Relative">Relative</option>
                                            <option value="Close Friend">Close Friend</option>
                                        </select> 
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Gender*</label>
                                        <select type="text" name="g2_gender" class="form-control">
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select> 
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{-- <div id="wizard_Details" class="tab-pane" role="tabpanel">
                            <div class="row">
                                <div class="col-sm-4 mb-2">
                                    <h4>Monday *</h4>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="9.00" type="number" name="input1" id="input1">
                                    </div>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="6.00" type="number" name="input2" id="input2">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 mb-2">
                                    <h4>Tuesday *</h4>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="9.00" type="number" name="input3" id="input3">
                                    </div>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="6.00" type="number" name="input4" id="input4">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 mb-2">
                                    <h4>Wednesday *</h4>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="9.00" type="number" name="input5" id="input5">
                                    </div>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="6.00" type="number" name="input6" id="input6">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 mb-2">
                                    <h4>Thrusday *</h4>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="9.00" type="number" name="input7" id="input7">
                                    </div>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="6.00" type="number" name="input8" id="input8">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-4 mb-2">
                                    <h4>Friday *</h4>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="9.00" type="number" name="input9" id="input9">
                                    </div>
                                </div>
                                <div class="col-6 col-sm-4 mb-2">
                                    <div class="mb-3">
                                        <input class="form-control" value="6.00" type="number" name="input10" id="input10">
                                    </div>
                                </div>
                            </div>
                        </div> --}}
                        <div id="wizard_Payment" class="tab-pane" role="tabpanel">
                            <div class="row">
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">NRC Copy*</label>
                                        <input type="file" name="nrc_file" class="form-control" id="nrcFile" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">Payslip (leave empty if not applicable)</label>
                                        <input type="file" name="payslip_file" class="form-control" id="payslip_file" required>
                                    </div>
                                </div>
                                <div class="col-lg-6 mb-2">
                                    <div class="mb-3">
                                        <label class="text-label form-label">TPIN*</label>
                                        <input type="file" name="tpin_file" class="form-control" id="tpin_file" required>
                                    </div>
                                </div>
                            </div>
    
                            {{-- <div class="row">
                                <div class="col-12">
                                    <div class="skip-email text-center">
                                        <p>Or if want skip this step entirely and setup it later</p>
                                        <a href="javascript:void(0)">Skip step</a>
                                    </div>
                                </div>
                            </div> --}}
                        </div>
                    </form>
                </div>
                <div id="loaderloanrequest" class="mx-auto">
                    <div class="container-fluid content-center justify-center items-center">
                        <img width="60" src="{{ asset('public/loader/loading.gif') }}">
                        <span>Please wait a minute</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- pickdate -->

    <script language = "javascript" type = "text/javascript">
        document.getElementById("loaderloanrequest").style.display = "none";
        document.getElementById("validbasicpayl2").style.display = "none";
        document.getElementById("validnetpayl2").style.display = "none";
        document.getElementById("validprincipal2").style.display = "none";
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js" integrity="sha384-NaWTHo/8YCBYJ59830LTz/P4aQZK1sS0SneOgAvhsIl3zBu8r9RevNg5lHCHAuQ/" crossorigin="anonymous"></script>
    <!-- html2canvas library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function (e) {
            $('#prof_image_create').change(function(){
                let reader = new FileReader();
                reader.onload = (e) => { 
                    $('#preview-image-before-upload_create').attr('src', e.target.result); 
                }
                reader.readAsDataURL(this.files[0]); 
            });
        });

        function printLoansTable(){
            $('.actions-btns').hide();
            // Get the HTML element that you want to convert to PDF
            const element = document.getElementById('loans_table_print_view');
            var pdfWidth = 210; // mm
            var pdfHeight = 297; // mm
            // Create a new jsPDF instance
            const doc = new jsPDF('landscape');
            // Use the html2canvas library to render the element as a canvas
            html2canvas(element).then(canvas => {
                // Convert the canvas to an image data URL
                const imgData = canvas.toDataURL('image/png');
                // Add the image data URL to the PDF document
                doc.addImage(
                    imgData, 
                    'PNG', 
                    2, // x-coordinate
                    2, // y-coordinate
                );

                // Save the PDF document
                doc.save('All Loans.pdf');
                
                $('.actions-btns').show();
            });
        }
    </script>
</div>
